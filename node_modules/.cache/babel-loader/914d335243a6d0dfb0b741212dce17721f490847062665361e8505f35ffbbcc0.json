{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Zuo/Desktop/Reactful-project/reactful-message-board/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Zuo/Desktop/Reactful-project/reactful-message-board/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Zuo/Desktop/Reactful-project/reactful-message-board/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import{useSelector}from\"react-redux\";import useHttp from\"../hook/useHttp\";import{getSinglePost}from\"../lib/firebase-api\";import{editSinglePost}from\"../lib/firebase-api\";import PleaseLogin from\"../components/UI/PleaseLogin\";import EditForm from\"../components/post/EditForm\";import{jsx as _jsx}from\"react/jsx-runtime\";var EditPost=function EditPost(){var isLogin=useSelector(function(state){return state.login.isLogin;});var _useHttp=useHttp(editSinglePost),sendRequest=_useHttp.sendRequest,status=_useHttp.status;var params=useParams();var postid=params.postid;var navigate=useNavigate();var _useState=useState({username:\"\",email:\"\",title:\"\",content:\"\",modifieddate:\"\",picture:\"\",postid:\"\"}),_useState2=_slicedToArray(_useState,2),editPost=_useState2[0],setEditPost=_useState2[1];var responseData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getSinglePost(postid);case 2:data=_context.sent;setEditPost(data);//return data;\ncase 4:case\"end\":return _context.stop();}}},_callee);})),[postid]);useEffect(function(){if(status===\"completed\"){window.alert(\"Post Edited!\");navigate(\"/mypost\",{replace:true});}responseData();},[responseData,status]);var editPostHandler=function editPostHandler(postObj){sendRequest(postObj);};return/*#__PURE__*/_jsx(React.Fragment,{children:isLogin?/*#__PURE__*/_jsx(EditForm,{editPostHandler:editPostHandler,postObj:editPost,setPostObj:setEditPost}):/*#__PURE__*/_jsx(PleaseLogin,{pageName:\"Edit Post\"})});};export default EditPost;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useNavigate","useParams","useSelector","useHttp","getSinglePost","editSinglePost","PleaseLogin","EditForm","EditPost","isLogin","state","login","sendRequest","status","params","postid","navigate","username","email","title","content","modifieddate","picture","editPost","setEditPost","responseData","data","window","alert","replace","editPostHandler","postObj"],"sources":["/Users/Zuo/Desktop/Reactful-project/reactful-message-board/src/pages/EditPost.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\n\nimport useHttp from \"../hook/useHttp\";\nimport { getSinglePost } from \"../lib/firebase-api\";\nimport { editSinglePost } from \"../lib/firebase-api\";\nimport PleaseLogin from \"../components/UI/PleaseLogin\";\nimport EditForm from \"../components/post/EditForm\";\n\nconst EditPost = () => {\n  const isLogin = useSelector((state) => state.login.isLogin);\n\n  const { sendRequest, status } = useHttp(editSinglePost);\n  const params = useParams();\n  const { postid } = params;\n  const navigate = useNavigate();\n\n  const [editPost, setEditPost] = useState({\n    username: \"\",\n    email: \"\",\n    title: \"\",\n    content: \"\",\n    modifieddate: \"\",\n    picture: \"\",\n    postid: \"\",\n  });\n\n  const responseData = useCallback(async () => {\n    const data = await getSinglePost(postid);\n    setEditPost(data);\n    //return data;\n  }, [postid]);\n\n  useEffect(() => {\n    if (status === \"completed\") {\n      window.alert(\"Post Edited!\");\n      navigate(\"/mypost\", { replace: true });\n    }\n    responseData();\n  }, [responseData, status]);\n\n  const editPostHandler = (postObj) => {\n    sendRequest(postObj);\n  };\n\n  return (\n    <React.Fragment>\n      {isLogin ? (\n        <EditForm\n          editPostHandler={editPostHandler}\n          postObj={editPost}\n          setPostObj={setEditPost}\n        />\n      ) : (\n        <PleaseLogin pageName={\"Edit Post\"} />\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default EditPost;\n"],"mappings":"gcAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,OAASC,WAAW,KAAQ,aAAa,CAEzC,MAAOC,QAAO,KAAM,iBAAiB,CACrC,OAASC,aAAa,KAAQ,qBAAqB,CACnD,OAASC,cAAc,KAAQ,qBAAqB,CACpD,MAAOC,YAAW,KAAM,8BAA8B,CACtD,MAAOC,SAAQ,KAAM,6BAA6B,CAAC,2CAEnD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,GAAMC,QAAO,CAAGP,WAAW,CAAC,SAACQ,KAAK,QAAKA,MAAK,CAACC,KAAK,CAACF,OAAO,GAAC,CAE3D,aAAgCN,OAAO,CAACE,cAAc,CAAC,CAA/CO,WAAW,UAAXA,WAAW,CAAEC,MAAM,UAANA,MAAM,CAC3B,GAAMC,OAAM,CAAGb,SAAS,EAAE,CAC1B,GAAQc,OAAM,CAAKD,MAAM,CAAjBC,MAAM,CACd,GAAMC,SAAQ,CAAGhB,WAAW,EAAE,CAE9B,cAAgCF,QAAQ,CAAC,CACvCmB,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EAAE,CACXC,YAAY,CAAE,EAAE,CAChBC,OAAO,CAAE,EAAE,CACXP,MAAM,CAAE,EACV,CAAC,CAAC,wCARKQ,QAAQ,eAAEC,WAAW,eAU5B,GAAMC,aAAY,CAAG1B,WAAW,wEAAC,oKACZK,cAAa,CAACW,MAAM,CAAC,QAAlCW,IAAI,eACVF,WAAW,CAACE,IAAI,CAAC,CACjB;AAAA,sDACD,GAAE,CAACX,MAAM,CAAC,CAAC,CAEZlB,SAAS,CAAC,UAAM,CACd,GAAIgB,MAAM,GAAK,WAAW,CAAE,CAC1Bc,MAAM,CAACC,KAAK,CAAC,cAAc,CAAC,CAC5BZ,QAAQ,CAAC,SAAS,CAAE,CAAEa,OAAO,CAAE,IAAK,CAAC,CAAC,CACxC,CACAJ,YAAY,EAAE,CAChB,CAAC,CAAE,CAACA,YAAY,CAAEZ,MAAM,CAAC,CAAC,CAE1B,GAAMiB,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,OAAO,CAAK,CACnCnB,WAAW,CAACmB,OAAO,CAAC,CACtB,CAAC,CAED,mBACE,KAAC,KAAK,CAAC,QAAQ,WACZtB,OAAO,cACN,KAAC,QAAQ,EACP,eAAe,CAAEqB,eAAgB,CACjC,OAAO,CAAEP,QAAS,CAClB,UAAU,CAAEC,WAAY,EACxB,cAEF,KAAC,WAAW,EAAC,QAAQ,CAAE,WAAY,EACpC,EACc,CAErB,CAAC,CAED,cAAehB,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}