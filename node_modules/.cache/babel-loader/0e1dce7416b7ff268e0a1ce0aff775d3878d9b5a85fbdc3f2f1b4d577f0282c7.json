{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Zuo/Desktop/Reactful-project/reactful-message-board/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Zuo/Desktop/Reactful-project/reactful-message-board/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import styles from\"./PostItem.module.scss\";import{deletePost}from\"../../lib/firebase-api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostItem=function PostItem(props){var location=useLocation();var navigate=useNavigate();var pathname=location.pathname;// console.log(pathname);\nvar deletePostHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(postid){var confirmDelete;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:confirmDelete=window.confirm(\"Are you sure to delete post?\");if(!confirmDelete){_context.next=13;break;}_context.prev=2;_context.next=5;return deletePost(postid);case 5:window.alert(\"Post deleted!\");navigate(\"/mypost\",{replace:true});window.location.reload();_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);window.alert(\"Something went worng... Please try again later.\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function deletePostHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"li\",{className:styles.items,children:[/*#__PURE__*/_jsxs(\"figure\",{children:[/*#__PURE__*/_jsxs(\"blockquote\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:props.title}),/*#__PURE__*/_jsx(\"p\",{children:props.content})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.infoContainer,children:[/*#__PURE__*/_jsx(\"figcaption\",{children:props.userName}),/*#__PURE__*/_jsxs(\"span\",{children:[\" modified at \",props.modifiedDate]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.linkBtn,children:[location.pathname==\"/allpost\"?\"\":/*#__PURE__*/_jsx(Link,{className:styles.primary,to:\"\".concat(location.pathname,\"/\").concat(props.postId),children:props.btnText}),pathname==\"/mypost\"?/*#__PURE__*/_jsx(Link,{className:styles.delete,to:\"#\",onClick:function onClick(){deletePostHandler(props.postId);},children:\"Delete\"}):\"\"]})]});};export default PostItem;","map":{"version":3,"names":["React","Link","useLocation","useNavigate","styles","deletePost","PostItem","props","location","navigate","pathname","deletePostHandler","postid","confirmDelete","window","confirm","alert","replace","reload","items","title","content","infoContainer","userName","modifiedDate","linkBtn","primary","postId","btnText","delete"],"sources":["/Users/Zuo/Desktop/Reactful-project/reactful-message-board/src/components/post/PostItem.js"],"sourcesContent":["import React from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\n\nimport styles from \"./PostItem.module.scss\";\nimport { deletePost } from \"../../lib/firebase-api\";\n\nconst PostItem = (props) => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const pathname = location.pathname;\n  // console.log(pathname);\n\n  const deletePostHandler = async (postid) => {\n    const confirmDelete = window.confirm(\"Are you sure to delete post?\");\n    if (confirmDelete) {\n      try {\n        await deletePost(postid);\n        window.alert(\"Post deleted!\");\n        navigate(\"/mypost\", { replace: true });\n        window.location.reload();\n      } catch {\n        window.alert(\"Something went worng... Please try again later.\");\n      }\n    }\n  };\n\n  return (\n    <li className={styles.items}>\n      <figure>\n        <blockquote>\n          <h3>{props.title}</h3>\n          <p>{props.content}</p>\n        </blockquote>\n        <div className={styles.infoContainer}>\n          <figcaption>{props.userName}</figcaption>\n          <span> modified at {props.modifiedDate}</span>\n        </div>\n      </figure>\n      <div className={styles.linkBtn}>\n        {location.pathname == \"/allpost\" ? (\n          \"\"\n        ) : (\n          <Link\n            className={styles.primary}\n            to={`${location.pathname}/${props.postId}`}\n          >\n            {props.btnText}\n          </Link>\n        )}\n\n        {pathname == \"/mypost\" ? (\n          <Link\n            className={styles.delete}\n            to={\"#\"}\n            onClick={() => {\n              deletePostHandler(props.postId);\n            }}\n          >\n            Delete\n          </Link>\n        ) : (\n          \"\"\n        )}\n      </div>\n    </li>\n  );\n};\n\nexport default PostItem;\n"],"mappings":"gTAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAEjE,MAAOC,OAAM,KAAM,wBAAwB,CAC3C,OAASC,UAAU,KAAQ,wBAAwB,CAAC,wFAEpD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAK,CAAK,CAC1B,GAAMC,SAAQ,CAAGN,WAAW,EAAE,CAC9B,GAAMO,SAAQ,CAAGN,WAAW,EAAE,CAC9B,GAAMO,SAAQ,CAAGF,QAAQ,CAACE,QAAQ,CAClC;AAEA,GAAMC,kBAAiB,4FAAG,iBAAOC,MAAM,sIAC/BC,aAAa,CAAGC,MAAM,CAACC,OAAO,CAAC,8BAA8B,CAAC,KAChEF,aAAa,gEAEPR,WAAU,CAACO,MAAM,CAAC,QACxBE,MAAM,CAACE,KAAK,CAAC,eAAe,CAAC,CAC7BP,QAAQ,CAAC,SAAS,CAAE,CAAEQ,OAAO,CAAE,IAAK,CAAC,CAAC,CACtCH,MAAM,CAACN,QAAQ,CAACU,MAAM,EAAE,CAAC,iFAEzBJ,MAAM,CAACE,KAAK,CAAC,iDAAiD,CAAC,CAAC,qEAGrE,kBAZKL,kBAAiB,4CAYtB,CAED,mBACE,YAAI,SAAS,CAAEP,MAAM,CAACe,KAAM,wBAC1B,uCACE,2CACE,oBAAKZ,KAAK,CAACa,KAAK,EAAM,cACtB,mBAAIb,KAAK,CAACc,OAAO,EAAK,GACX,cACb,aAAK,SAAS,CAAEjB,MAAM,CAACkB,aAAc,wBACnC,4BAAaf,KAAK,CAACgB,QAAQ,EAAc,cACzC,wCAAoBhB,KAAK,CAACiB,YAAY,GAAQ,GAC1C,GACC,cACT,aAAK,SAAS,CAAEpB,MAAM,CAACqB,OAAQ,WAC5BjB,QAAQ,CAACE,QAAQ,EAAI,UAAU,CAC9B,EAAE,cAEF,KAAC,IAAI,EACH,SAAS,CAAEN,MAAM,CAACsB,OAAQ,CAC1B,EAAE,WAAKlB,QAAQ,CAACE,QAAQ,aAAIH,KAAK,CAACoB,MAAM,CAAG,UAE1CpB,KAAK,CAACqB,OAAO,EAEjB,CAEAlB,QAAQ,EAAI,SAAS,cACpB,KAAC,IAAI,EACH,SAAS,CAAEN,MAAM,CAACyB,MAAO,CACzB,EAAE,CAAE,GAAI,CACR,OAAO,CAAE,kBAAM,CACblB,iBAAiB,CAACJ,KAAK,CAACoB,MAAM,CAAC,CACjC,CAAE,oBAGG,CAEP,EACD,GACG,GACH,CAET,CAAC,CAED,cAAerB,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}